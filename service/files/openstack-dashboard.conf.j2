{% set venv_path = '/var/lib/microservices/venv/lib/python2.7/site-packages' %}

<VirtualHost *:{{ horizon_port }}>
    WSGIScriptAlias / {{ venv_path }}/openstack_dashboard/wsgi/django.wsgi
    WSGIScriptAlias /horizon {{ venv_path }}/openstack_dashboard/wsgi/django.wsgi
    WSGIDaemonProcess horizon user=horizon group=horizon processes=3 threads=10 python-path={{ venv_path }}
    WSGIProcessGroup horizon

    Alias /static {{ venv_path }}/static

    <Directory {{ venv_path }}/openstack_dashboard/wsgi>
        Order allow,deny
        Allow from all
        Require all granted
    </Directory>
    <Directory {{ venv_path }}/static>
        Order allow,deny
        Allow from all
        Require all granted
    </Directory>

    <IfVersion >= 2.4>
        ErrorLogFormat "%{cu}t %-m:%-l %P:%T %M"
    </IfVersion>
    LogFormat "%{X-Forwarded-For}i %l %u %t \"%r\" %>s %b %D \"%{Referer}i\" \"%{User-Agent}i\"" access
    ErrorLog  "{{ horizon_log_base }}/horizon-error.log"
    CustomLog "{{ horizon_log_base }}/horizon-access.log" access
</VirtualHost>
